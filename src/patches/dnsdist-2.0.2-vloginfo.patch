From e01eb83ec8572248f7f661e27d67f731bfb1e5f7 Mon Sep 17 00:00:00 2001
From: Remi Gacogne <remi.gacogne@powerdns.com>
Date: Thu, 16 Oct 2025 15:11:56 +0200
Subject: [PATCH] dnsdist: Fix build error when only protobuf is enabled
MIME-Version: 1.0
Content-Type: text/plain; charset=utf8
Content-Transfer-Encoding: 8bit

The build fails with:
```
../dnsdist-protobuf.cc: In member function âvoid DNSDistProtoBufMessage::serialize(std::string&) constâ:
../dnsdist-protobuf.cc:205:7: error: âvinfologâ was not declared in this scope
  205 |       vinfolog("Error while parsing the RRs from a response packet to add them to the protobuf message: %s", exp.what());
      |       ^~~~~~~~
```
because of a missing header.

Signed-off-by: Remi Gacogne <remi.gacogne@powerdns.com>
(cherry picked from commit a279a1453094d0abfc847aa790bc82addc14cc62)
---
 pdns/dnsdistdist/dnsdist-protobuf.cc | 1 +
 1 file changed, 1 insertion(+)

diff --git a/pdns/dnsdistdist/dnsdist-protobuf.cc b/pdns/dnsdistdist/dnsdist-protobuf.cc
index e02b6d8755..cc4fae9139 100644
--- a/pdns/dnsdistdist/dnsdist-protobuf.cc
+++ b/pdns/dnsdistdist/dnsdist-protobuf.cc
@@ -25,6 +25,7 @@
 #include "base64.hh"
 #include "dnsdist.hh"
 #include "dnsdist-protobuf.hh"
+#include "dolog.hh"
 #include "protozero.hh"
 
 DNSDistProtoBufMessage::DNSDistProtoBufMessage(const DNSQuestion& dnsquestion) :
-- 
2.47.3

